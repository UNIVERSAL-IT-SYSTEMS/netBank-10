<ui:composition template="/templates/adminLayout.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="content">
        <h:form id="form">
            <p:growl id="growl" showDetail="true" sticky="false" life="2000"/>
            <h1>Ügyfél adatai</h1>
            <hr />
            <p:panelGrid columns="2" class="tableReg">
                    <p:outputLabel value="Név:" for="name" />
                    <p:outputLabel id="name" value="#{userController.user.name}" title="Név"/>
                    <p:outputLabel value="Születési idő: " />
                    <p:outputLabel id="dateOfBirth" value="#{userController.user.dateOfBirth}" title="Születési idő">
                        <f:convertDateTime pattern="YYYY.MM.dd" />
                    </p:outputLabel>
                    <p:outputLabel value="Email cím: " for="email" />
                    <p:outputLabel id="email" value="#{userController.user.email}" title="Email"/>
                    <p:outputLabel value="Felhasználónév: " for="loginName" />
                    <p:outputLabel id="loginName" value="#{userController.user.loginName}" title="Felhasználónév"/>
                    <p:outputLabel value="Pozíció:" />
                    <p:outputLabel id="position" value="#{userController.user.position}" title="Pozíció"/>
            </p:panelGrid>
            <h1>Ügyfél Bankszámlái</h1>
            <p:dataTable var="account" emptyMessage="Nincs találat" value="#{accountController.getListByUser(userController.user)}" class="dataTable"
                         selectionMode="single" selection="#{accountController.selectedAccount}" rowKey="#{account.id}">
                 <p:column headerText="Számlaszám" filterBy="#{account.accountNumber}" filterMatchMode="contains">
                    <h:outputText value="#{account.accountNumber}" />
                </p:column>
                <p:column headerText="Egyenleg">
                    <h:outputText value="#{account.balance} Ft" />
                </p:column>
            </p:dataTable>
            
            <hr />
            
            <div align="center" class="listButtons">
                <p:commandButton value="Bankszámla megtekintése" action="#{accountController.selectedToTrancasctionList()}" class="button btn btn-default" ajax="true" update="@form"/>
                <p:commandButton value="Új Bankszámla hozzáadása" onclick="PF('createDialog').show();" styleClass="btnPosLeft" class="button btn btn-default"/>
                <p:commandButton value="Bankszámla Törlése" type="button" onclick="PF('deleteDialog').show();"  class="button btn btn-default" ajax="true" update="@form"/>
            </div>
            
            
            <p:dialog header="Biztosan létre kíván hozni egy új bankszámlát ehez az ügyfélhez?" widgetVar="createDialog" modal="true" height="100" width="400" resizable="false" draggable="false">
                 <div>
                    <div class="col-md-6">
                        <p:commandButton value="Igen" actionListener="#{accountController.adminAddAccount(userController.user)}" ajax="true" update="@all" class="button btn btn-default"/>
                    </div>
                    <div class="col-md-6">
                        <p:commandButton value="Vissza" ajax="true"  update="@all" class="button btn btn-default"/>
                    </div>
                </div>
            </p:dialog>
            
            
            <p:dialog header="Biztosan törli a Bankszámlát?" widgetVar="deleteDialog" modal="true" height="100" width="400" resizable="false" draggable="false">
                 <div>
                    <div class="col-md-6">
                        <p:commandButton value="Igen" actionListener="#{accountController.deleteAccount()}"  ajax="true" update="@all" class="button btn btn-default"/>
                    </div>
                    <div class="col-md-6">
                        <p:commandButton value="Vissza" ajax="true"  update="@all" class="button btn btn-default"/>
                    </div>
                </div>
            </p:dialog>
        </h:form>
        
    </ui:define>
</ui:composition>
