<ui:composition template="/templates/userLayout.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="content">
        <h:form>
            <div align="center">
                <h1>Felhasználó Adatainak Módosítása</h1>
                <hr />
                <p:panelGrid columns="2" class="tableReg">
                    <p:outputLabel value="Név:" for="name" />
                    <p:outputLabel id="name" value="#{userController.user.name}" title="Név"/>
                    <p:outputLabel value="Születési idő: " />
                    <p:outputLabel id="dateOfBirth" value="#{userController.user.dateOfBirth}" title="Születési idő">
                        <f:convertDateTime pattern="YYYY.MM.dd" />
                    </p:outputLabel>
                    <p:outputLabel value="Cím: " for="address" />
                    <p:outputLabel id="address" value="#{userController.user.address}" title="Cím"/>
                    <p:outputLabel value="Email cím: " for="email" />
                    <p:outputLabel id="email" value="#{userController.user.email}" title="Email"/>
                    <p:outputLabel value="Telefonszám: " for="phone" />
                    <p:outputLabel id="phone" value="#{userController.user.phoneNumber}" title="Telefonszám"/>
                    <p:outputLabel value="Felhasználónév: " for="loginName" />
                    <p:outputLabel id="loginName" value="#{userController.user.loginName}" title="Felhasználónév"/>
                </p:panelGrid>
                <div class="row">
                    <div class="col-lg-6 regButtons">
                        <p:button value="Adatok módosítása" href="editProfile.xhtml" class="button btn btn-default"/>
                    </div>
                    <div class="col-lg-6 regButtons">
                        <p:commandButton value="Jelszó megváltoztatása" onclick="PF('passchange').show()" class="button btn btn-default"/>
                    </div>
                    <div class="col-lg-6">
                        <p:button value="Mégse" href="index.xhtml" class="button btn btn-default"/>
                    </div>
                </div>
            </div>


            <p:dialog header="Jelszó megváltoztatása" widgetVar="passchange" modal="true" height="250" width="750" >
                <div class="form-group">
                    <label class ="col-md-5 control-label">Jelenlegi jelszó</label>
                    <div class="col-md-5">
                        <h:inputSecret id="oldpass" required="true" requiredMessage="Adja meg a jelenlegi jelszavát" autocomplete="off" class="form-control">
                            <f:validator binding="#{currentPasswordValidator}" />
                        </h:inputSecret>
                        <h:message id="m_oldpass" for="oldpass" />
                    </div>
                </div>

                <div class="form-group">
                    <h:outputLabel class ="col-md-5 control-label" for="password" value="Új jelszó"/>
                    <div class="col-md-5">
                        <h:inputSecret class="form-control" id="password" autocomplete="off" required="true" requiredMessage="Nem adott meg jelszót!" value="#{userController.newPassword}">
                            <f:attribute name="confirm" value="#{confirmPassword.submittedValue}" />
                        </h:inputSecret>
                        <h:message id="m_password" for="password"/>
                    </div>
                </div>
                <div class="form-group">
                    <h:outputLabel class ="col-md-5 control-label" for="confirm" value="Új jelszó megerősítése"/>
                    <div class="col-md-5">
                        <h:inputSecret  class="form-control" id="confirm" binding="#{confirmPassword}" autocomplete="off" required="true" requiredMessage="Nem erősítette meg a jelszót!" value="#{userController.newPassword}" >
                        </h:inputSecret>
                        <h:message id="m_confirm" for="confirm" />
                    </div>
                </div>



                <p:messages id="messages" showDetail="false" autoUpdate="true"></p:messages>

                <div class="form-group">
                    <div class="col-md-5"/>    
                    <div class="col-md-5">
                        <p:commandButton id="save" class="btn" value="Módosítás" type="submit" action="#{userController.changePassword}" /> 
                        <p:commandButton id="cancel" value="Mégse" class="btn" onclick="PF('passchange').close()" immediate="true" action="editUser?faces-redirect=true"/>
                    </div>
                </div>
            </p:dialog>
        </h:form>     
    </ui:define>
</ui:composition>